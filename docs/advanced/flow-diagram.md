# 流程图

## 消息处理流程

消息预处理器 (message preprocessor)，命令处理器 (command handler) 和自然语言处理器 (nl processor) 是 NoneBot 中处理一条聊天消息的三个核心组件。它们的执行顺序如下：

<!--<?xml version="1.0" encoding="UTF-8"?> -->
<!-- Do not edit this file with editors other than diagrams.net -->
<!--<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"> -->
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="731px" height="1601px" viewBox="-0.5 -0.5 731 1601" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2021-10-26T08:12:36.294Z&quot; agent=&quot;5.0 (Windows)&quot; etag=&quot;zFFvrKzNbqjZYSYMMLSK&quot; version=&quot;15.5.9&quot; type=&quot;browser&quot;&gt;&lt;diagram id=&quot;t8tnkgTckmRLIJ995TjZ&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;"><defs/><g><rect x="0" y="140" width="440" height="1460" fill="#ffffff" stroke="#000000" stroke-dasharray="1 2" pointer-events="all"/><rect x="30" y="1003" width="380" height="517" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 378px; height: 1px; padding-top: 1261px; margin-left: 31px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div>【自然语言处理器】</div><div><br /></div><div>消息如果不是命令，在最后会匹配由 @on_natural_language 定义的自然语言处理器来将此消息视为<span class="ILfuVd"><span class="hgKElc">「</span></span>自然语言会话<span class="ILfuVd"><span class="hgKElc">」</span></span>的一部分。在这些处理器中，用户可以根据此消息事件决定是否将此消息也当作命令处理（通过返回 IntentCommand 对象）。</div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div></div></div></div></foreignObject><text x="220" y="1265" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">【自然语言处理器】消息如果不是命令，在最后会匹配由 @on_natural_language 定义的自然语言处理器来将此消息视为「自然语言会话」的一部分。在这些处理器中，用户可以根据此消息事件决定是否将此消息也当作命令处理（通过返回 IntentCommand 对象）。...</text></switch></g><rect x="52" y="1164" width="238" height="170" fill="#fff2cc" stroke="#000000" stroke-dasharray="3 3" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 236px; height: 1px; padding-top: 1249px; margin-left: 54px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div align="left">对于每个</div><div align="left"><br /></div><div align="left"><br /></div><div align="left"><br /></div><div align="left"><br /></div><div align="left"><br /></div><div align="left"><br /></div><div align="left"><br /></div><div align="left"><br /></div><div align="left"><br /></div><div align="left"><br /></div><div align="left"><br /></div><div align="left"><br /></div><div align="left"><br /></div></div></div></div></foreignObject><text x="54" y="1252" fill="#000000" font-family="Helvetica" font-size="9px">对于每个...</text></switch></g><path d="M 290 95 L 634.97 95 L 634.97 133.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 634.97 138.88 L 631.47 131.88 L 634.97 133.63 L 638.47 131.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="150" y="70" width="140" height="50" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 95px; margin-left: 151px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div>aiocqhttp/Quart</div><div>(NoneBot 的依赖)<br /></div></div></div></div></foreignObject><text x="220" y="99" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">aiocqhttp/Quart...</text></switch></g><rect x="150" y="0" width="140" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 10px; margin-left: 220px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">消息事件 (群聊, 私聊等)</div></div></div></foreignObject><text x="220" y="14" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">消息事件 (群聊, 私聊等)</text></switch></g><path d="M 219.66 20 L 219.96 63.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 219.99 68.88 L 216.44 61.91 L 219.96 63.63 L 223.44 61.86 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="220" y="30" width="130" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 40px; margin-left: 285px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;"><font style="font-size: 9px">OneBot 通过 HTTP/WS 上报<br /></font></div></div></div></foreignObject><text x="285" y="44" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">OneBot 通过 HTTP/WS 上报&#xa;</text></switch></g><rect x="30" y="170" width="380" height="260" fill="#dae8fc" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 378px; height: 1px; padding-top: 300px; margin-left: 31px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div align="center"><font style="font-size: 12px">【消息预处理】</font></div><div align="center"><font style="font-size: 12px"><br /></font></div><div align="center"><font style="font-size: 12px">向机器人发送的聊天消息首先会被消息预处理器*（通过插件中的 @message_preprocessor 注册）接收。</font></div><div align="center"><font style="font-size: 12px"><br /></font></div><div align="center"><font style="font-size: 12px">预处理器会接收本次的事件对象 (CQEvent) 和一个插件管理器 (PluginManager) 对象，其可以调用 API，对这次事件进行处理或改动，管理插件的开关，或直接抛出异常来停止处理这条消息。<br /></font></div><div align="center"><font style="font-size: 12px"><br /></font></div><div align="center"><font style="font-size: 12px"><br /></font></div><div align="center"><font style="font-size: 12px"><br /></font></div><div align="center"><font style="font-size: 12px"><br /></font></div><div align="center"><font style="font-size: 12px"><br /></font></div><div align="center"><font style="font-size: 12px"><br /></font></div><div align="center"><font style="font-size: 12px"><br /></font></div></div></div></div></foreignObject><text x="220" y="303" fill="#000000" font-family="Helvetica" font-size="9px" text-anchor="middle">【消息预处理】向机器人发送的聊天消息首先会被消息预处理器*（通过插件中的 @message_preprocessor 注册）接收。...</text></switch></g><path d="M 219.31 120 L 219.91 163.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 219.98 168.88 L 216.39 161.93 L 219.91 163.63 L 223.39 161.83 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="30" y="475" width="380" height="500" fill="#e1d5e7" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 378px; height: 1px; padding-top: 725px; margin-left: 31px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div align="center">【匹配命令】</div><div align="center"><br /></div><div align="center">NoneBot 会尝试根据消息的内容来查找相匹配的命令处理器（通过插件中的 @on_command 注册）来将这条信息视作命令会话的一部分。这是机器人主要的交互方式。</div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div><div align="center"><br /></div></div></div></div></foreignObject><text x="220" y="729" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">【匹配命令】NoneBot 会尝试根据消息的内容来查找相匹配的命令处理器（通过插件中的 @on_command 注册）来将这条信息视作命令会话的一部分。这是机器人主要的交互方式。...</text></switch></g><path d="M 230 565 L 330 600 L 230 635 L 130 600 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 600px; margin-left: 131px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div style="font-size: 11px"><font style="font-size: 11px">该发送者是否有已有尚未过期的</font></div><div style="font-size: 11px"><font style="font-size: 11px">命令会话？</font></div></div></div></div></foreignObject><text x="230" y="604" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">该发送者是否有已有尚未过期的&#xa;命令会话？</text></switch></g><rect x="270" y="655" width="100" height="20" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 665px; margin-left: 271px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 9px">尝试匹配一个命令</font></div></div></div></foreignObject><text x="320" y="669" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">尝试匹配一个命令</text></switch></g><path d="M 320 688 L 355 703 L 320 718 L 285 703 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 703px; margin-left: 286px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 9px">OK?</font></div></div></div></foreignObject><text x="320" y="707" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">OK?</text></switch></g><rect x="225" y="725" width="80" height="30" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 740px; margin-left: 226px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 9px">尝试检查权限</font></div></div></div></foreignObject><text x="265" y="744" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">尝试检查权限</text></switch></g><path d="M 265 771 L 300 786 L 265 801 L 230 786 Z" fill="#e1d5e7" stroke="#9673a6" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 786px; margin-left: 231px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 9px">OK?</font></div></div></div></foreignObject><text x="265" y="790" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">OK?</text></switch></g><rect x="140" y="826" width="120" height="60" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 856px; margin-left: 141px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 9px">插件管理器会构建一个新的 CommandSession 对象传入命令处理器并执行。</font></div></div></div></foreignObject><text x="200" y="859" fill="#000000" font-family="Helvetica" font-size="9px" text-anchor="middle">插件管理器会构建一个新的 CommandSession 对象传入命令处理器并执行。</text></switch></g><rect x="60" y="655" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 685px; margin-left: 61px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">拾起已存在的 CommandSession 并继续从会话暂停的地方运行 (如 aget 调用)。</div></div></div></foreignObject><text x="120" y="688" fill="#000000" font-family="Helvetica" font-size="9px" text-anchor="middle">拾起已存在的 CommandSession 并继续从会话暂停的地方运行 (如 aget 调用)。</text></switch></g><rect x="80" y="910" width="120" height="40" fill="#e1d5e7" stroke="#020203" pointer-events="all"/><rect x="85" y="916" width="110" height="30" fill="#e1d5e7" stroke="#020203" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 931px; margin-left: 86px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">消息处理完毕</div></div></div></foreignObject><text x="140" y="934" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">消息处理完毕</text></switch></g><path d="M 320 675 L 320 681.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 320 686.88 L 316.5 679.88 L 320 681.63 L 323.5 679.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 170 614.98 L 124.97 651.02" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 120.87 654.3 L 124.15 647.19 L 124.97 651.02 L 128.52 652.66 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 289.8 615.26 L 325.47 650.52" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 329.2 654.21 L 321.77 651.78 L 325.47 650.52 L 326.69 646.8 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 293.12 706.72 L 265.61 721.92" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 261.02 724.46 L 265.45 718.01 L 265.61 721.92 L 268.84 724.14 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="265" y="698" width="20" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 708px; margin-left: 275px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;"><font style="font-size: 9px">T</font></div></div></div></foreignObject><text x="275" y="711" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">T</text></switch></g><path d="M 265 755 L 265 764.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 265 769.88 L 261.5 762.88 L 265 764.63 L 268.5 762.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 239.45 791.28 L 204.78 821.79" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 200.84 825.26 L 203.78 818.01 L 204.78 821.79 L 208.41 823.26 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 154.88 886.12 L 154.97 903.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 154.99 908.88 L 151.46 901.9 L 154.97 903.63 L 158.46 901.86 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="200" y="795" width="20" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 805px; margin-left: 210px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">T</div></div></div></foreignObject><text x="210" y="808" fill="#000000" font-family="Helvetica" font-size="9px" text-anchor="middle">T</text></switch></g><rect x="126" y="618" width="20" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 628px; margin-left: 136px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;"><font style="font-size: 11px">T</font></div></div></div></foreignObject><text x="136" y="631" fill="#000000" font-family="Helvetica" font-size="9px" text-anchor="middle">T</text></switch></g><rect x="307" y="618" width="20" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 628px; margin-left: 317px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">F</div></div></div></foreignObject><text x="317" y="631" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">F</text></switch></g><path d="M 278.86 794.7 L 279 930 L 206.37 930" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 201.12 930 L 208.12 926.5 L 206.37 930 L 208.12 933.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="275" y="795" width="20" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 805px; margin-left: 285px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;"><font style="font-size: 9px">F</font></div></div></div></foreignObject><text x="285" y="808" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">F</text></switch></g><path d="M 110 715 L 110 903.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 110 908.88 L 106.5 901.88 L 110 903.63 L 113.5 901.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 337.5 710.5 L 340.4 997.67" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 340.45 1002.92 L 336.88 995.95 L 340.4 997.67 L 343.88 995.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="335" y="709" width="20" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 719px; margin-left: 345px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">F</div></div></div></foreignObject><text x="345" y="722" fill="#000000" font-family="Helvetica" font-size="9px" text-anchor="middle">F</text></switch></g><path d="M 215 320 L 310 345 L 215 370 L 120 345 Z" fill="#dae8fc" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 188px; height: 1px; padding-top: 345px; margin-left: 121px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 12px">处理器都成功返回？<br /></font></div></div></div></foreignObject><text x="215" y="348" fill="#000000" font-family="Helvetica" font-size="9px" text-anchor="middle">处理器都成功返回？&#xa;</text></switch></g><path d="M 167.5 357.5 L 167.56 468.13" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 167.56 473.38 L 164.06 466.38 L 167.56 468.13 L 171.06 466.38 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="145" y="362" width="20" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 372px; margin-left: 155px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">T</div></div></div></foreignObject><text x="155" y="376" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">T</text></switch></g><rect x="263" y="385" width="120" height="31" fill="#dae8fc" stroke="#000000" pointer-events="all"/><rect x="266" y="387" width="114" height="26.6" fill="#dae8fc" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 112px; height: 1px; padding-top: 400px; margin-left: 267px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">消息处理完毕</div></div></div></foreignObject><text x="323" y="404" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">消息处理完毕</text></switch></g><path d="M 262.5 357.5 L 321.12 382.14" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 325.96 384.17 L 318.15 384.69 L 321.12 382.14 L 320.86 378.23 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="283" y="351" width="20" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 361px; margin-left: 293px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">F</div></div></div></foreignObject><text x="293" y="365" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">F</text></switch></g><rect x="182" y="1554" width="120" height="31" fill="#ffffff" stroke="#000000" pointer-events="all"/><rect x="185" y="1556" width="114" height="26.6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 112px; height: 1px; padding-top: 1569px; margin-left: 186px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 9px">消息处理完毕 (discarded)<br /></font></div></div></div></foreignObject><text x="242" y="1573" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">消息处理完毕 (discarded)&#xa;</text></switch></g><rect x="148" y="1114" width="135" height="40" fill="#fff2cc" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 133px; height: 1px; padding-top: 1134px; margin-left: 149px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">尝试（多个）自然语言处理器</div></div></div></foreignObject><text x="216" y="1138" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">尝试（多个）自然语言处理器</text></switch></g><rect x="52" y="1474" width="120" height="31" fill="#fff2cc" stroke="#000000" pointer-events="all"/><rect x="55" y="1476" width="114" height="26.6" fill="#fff2cc" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 112px; height: 1px; padding-top: 1489px; margin-left: 56px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">消息处理完毕</div></div></div></foreignObject><text x="112" y="1493" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">消息处理完毕</text></switch></g><rect x="166" y="1174" width="107" height="37" fill="#fff2cc" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 105px; height: 1px; padding-top: 1193px; margin-left: 167px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 9px">尝试匹配关键字，检查 NLP 的权限等<br /></font></div></div></div></foreignObject><text x="220" y="1196" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">尝试匹配关键字，检查 NLP 的权限等&#xa;</text></switch></g><path d="M 166.5 1227 L 199 1242 L 166.5 1257 L 134 1242 Z" fill="#fff2cc" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 63px; height: 1px; padding-top: 1242px; margin-left: 135px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">OK?</div></div></div></foreignObject><text x="167" y="1245" fill="#000000" font-family="Helvetica" font-size="9px" text-anchor="middle">OK?</text></switch></g><rect x="63" y="1274" width="115" height="50" fill="#fff2cc" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 113px; height: 1px; padding-top: 1299px; margin-left: 64px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 9px">插件管理器会构建一个新的 NLPSession 对象传入自然语言处理器并执行。</font></div></div></div></foreignObject><text x="121" y="1302" fill="#000000" font-family="Helvetica" font-size="9px" text-anchor="middle">插件管理器会构建一个新的 NLPSession 对象传入自然语言处理器并执行。</text></switch></g><rect x="154" y="1356" width="120" height="50" fill="#fff2cc" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1381px; margin-left: 155px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">NoneBot 在返回的所有 IntentCommand 中选择最好的，将该消息以命令执行。</div></div></div></foreignObject><text x="214" y="1384" fill="#000000" font-family="Helvetica" font-size="9px" text-anchor="middle">NoneBot 在返回的所有 IntentCommand 中选择最好的，将该消息以命令执行。</text></switch></g><path d="M 215 1154 L 215 1167.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 215 1172.88 L 211.5 1165.88 L 215 1167.63 L 218.5 1165.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 192.75 1211 L 182.25 1227.15" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 179.39 1231.55 L 180.27 1223.78 L 182.25 1227.15 L 186.14 1227.59 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="182" y="1213" width="20" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1223px; margin-left: 192px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;"><font style="font-size: 9px">T</font></div></div></div></foreignObject><text x="192" y="1227" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">T</text></switch></g><path d="M 146.87 1248.66 L 125.09 1269.59" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 121.31 1273.23 L 123.93 1265.85 L 125.09 1269.59 L 128.78 1270.9 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 149.25 1324 L 171.78 1349.85" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 175.23 1353.81 L 167.99 1350.83 L 171.78 1349.85 L 173.27 1346.23 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 258.34 1212.48 L 259.31 1348.28" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 259.35 1353.53 L 255.8 1346.56 L 259.31 1348.28 L 262.8 1346.51 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="241" y="1213" width="20" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1223px; margin-left: 251px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">F</div></div></div></foreignObject><text x="251" y="1226" fill="#000000" font-family="Helvetica" font-size="9px" text-anchor="middle">F</text></switch></g><path d="M 219 1425 L 267 1440 L 219 1455 L 171 1440 Z" fill="#fff2cc" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 94px; height: 1px; padding-top: 1440px; margin-left: 172px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div align="center">IntentCommand?<br /></div></div></div></div></foreignObject><text x="219" y="1443" fill="#000000" font-family="Helvetica" font-size="9px" text-anchor="middle">IntentCommand?&#xa;</text></switch></g><path d="M 220.24 1406.75 L 220.09 1417.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 220.02 1422.88 L 216.61 1415.83 L 220.09 1417.63 L 223.61 1415.93 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 195 1447.5 L 114.29 1470.08" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 109.24 1471.5 L 115.03 1466.24 L 114.29 1470.08 L 116.92 1472.98 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="139" y="1441" width="20" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1451px; margin-left: 149px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">T</div></div></div></foreignObject><text x="149" y="1454" fill="#000000" font-family="Helvetica" font-size="9px" text-anchor="middle">T</text></switch></g><path d="M 243 1447.5 L 242.85 1547.14" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 242.84 1552.39 L 239.35 1545.38 L 242.85 1547.14 L 246.35 1545.39 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="241" y="1448" width="20" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1458px; margin-left: 251px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">F</div></div></div></foreignObject><text x="251" y="1461" fill="#000000" font-family="Helvetica" font-size="9px" text-anchor="middle">F</text></switch></g><rect x="241" y="1525" width="170" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1535px; margin-left: 326px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">NoneBot 无法将此消息匹配任何处理器</div></div></div></foreignObject><text x="326" y="1538" fill="#000000" font-family="Helvetica" font-size="9px" text-anchor="middle">NoneBot 无法将此消息匹配任何处理器</text></switch></g><rect x="540" y="140" width="190" height="100" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 188px; height: 1px; padding-top: 190px; margin-left: 541px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div align="center">@bot.on_message</div><div><br /></div><div>由 aiocqhttp 提供的消息操作器。由此装饰器注册的回调会和左边的步骤同时进行来响应聊天消息。没有特别虚要，应该在 NoneBot 项目中避免使用。<br /></div><div><br /></div></div></div></div></foreignObject><text x="635" y="193" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">@bot.on_message...</text></switch></g><path d="M 230 565 L 330 600 L 230 635 L 130 600 Z" fill="#e1d5e7" stroke="#020203" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 600px; margin-left: 131px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div style="font-size: 11px"><font style="font-size: 11px">该发送者是否有已有尚未过期的</font></div><div style="font-size: 11px"><font style="font-size: 11px">命令会话？</font></div></div></div></div></foreignObject><text x="230" y="604" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">该发送者是否有已有尚未过期的&#xa;命令会话？</text></switch></g><rect x="60" y="655" width="120" height="60" fill="#e1d5e7" stroke="#020203" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 685px; margin-left: 61px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">拾起已存在的 CommandSession 并继续从会话暂停的地方运行 (如 aget 调用)。</div></div></div></foreignObject><text x="120" y="688" fill="#000000" font-family="Helvetica" font-size="9px" text-anchor="middle">拾起已存在的 CommandSession 并继续从会话暂停的地方运行 (如 aget 调用)。</text></switch></g><rect x="270" y="655" width="100" height="20" fill="#e1d5e7" stroke="#020203" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 665px; margin-left: 271px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 9px">尝试匹配一个命令</font></div></div></div></foreignObject><text x="320" y="669" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">尝试匹配一个命令</text></switch></g><path d="M 320 688 L 355 703 L 320 718 L 285 703 Z" fill="#e1d5e7" stroke="#020203" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 703px; margin-left: 286px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 9px">OK?</font></div></div></div></foreignObject><text x="320" y="707" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">OK?</text></switch></g><rect x="140" y="825.5" width="120" height="60" fill="#e1d5e7" stroke="#020203" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 856px; margin-left: 141px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 9px">插件管理器会构建一个新的 CommandSession 对象传入命令处理器并执行。</font></div></div></div></foreignObject><text x="200" y="858" fill="#000000" font-family="Helvetica" font-size="9px" text-anchor="middle">插件管理器会构建一个新的 CommandSession 对象传入命令处理器并执行。</text></switch></g><path d="M 265 770.5 L 300 785.5 L 265 800.5 L 230 785.5 Z" fill="#e1d5e7" stroke="#020203" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 786px; margin-left: 231px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 9px">OK?</font></div></div></div></foreignObject><text x="265" y="789" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">OK?</text></switch></g><rect x="225" y="724.5" width="80" height="30" fill="#e1d5e7" stroke="#020203" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 740px; margin-left: 226px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 9px">尝试检查权限</font></div></div></div></foreignObject><text x="265" y="743" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">尝试检查权限</text></switch></g><rect x="3" y="143" width="110" height="20" fill="#ffffff" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 153px; margin-left: 4px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">handle_message()</div></div></div></foreignObject><text x="58" y="156" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">handle_message()</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>

* \* 多个消息预处理器的执行顺序是未定义的（此为可以改进的地方）
